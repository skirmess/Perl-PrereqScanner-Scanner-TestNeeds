use 5.006;
use strict;
use warnings;

use ExtUtils::MakeMaker;

my %WriteMakefileArgs = (
    ABSTRACT           => 'scan for modules loaded with Test::Needs',
    AUTHOR             => 'Sven Kirmess <sven.kirmess@kzone.ch>',
    CONFIGURE_REQUIRES => {
        'ExtUtils::MakeMaker' => 0,
    },
    DISTNAME         => 'Perl-PrereqScanner-Scanner-TestNeeds',
    LICENSE          => 'open_source',
    MIN_PERL_VERSION => '5.006',
    NAME             => 'Perl::PrereqScanner::Scanner::TestNeeds',
    PREREQ_PM        => {
        Moose                          => 0,
        'PPIx::Literal'                => 0,
        'Perl::PrereqScanner::Scanner' => 0,
        'namespace::autoclean'         => 0,
        strict                         => 0,
        version                        => '0.77',
        warnings                       => 0,
    },
    TEST_REQUIRES => {
        'Perl::PrereqScanner' => 0,
        'Test::More'          => '0.88',
        lib                   => 0,
    },
    VERSION => '0.001',
    test    => {
        TESTS => 't/*.t',
    },
);

my %FallbackPrereqs = (
    Moose                          => 0,
    'PPIx::Literal'                => 0,
    'Perl::PrereqScanner'          => 0,
    'Perl::PrereqScanner::Scanner' => 0,
    'Test::More'                   => '0.88',
    lib                            => 0,
    'namespace::autoclean'         => 0,
    strict                         => 0,
    version                        => '0.77',
    warnings                       => 0,
);

if ( !eval { ExtUtils::MakeMaker->VERSION('6.63_03') } ) {
    delete $WriteMakefileArgs{TEST_REQUIRES};
    delete $WriteMakefileArgs{BUILD_REQUIRES};
    $WriteMakefileArgs{PREREQ_PM} = \%FallbackPrereqs;
}

if ( !eval { ExtUtils::MakeMaker->VERSION(6.52) } ) {
    delete $WriteMakefileArgs{CONFIGURE_REQUIRES};
}

WriteMakefile(%WriteMakefileArgs);

# vim: ts=4 sts=4 sw=4 et: syntax=perl
